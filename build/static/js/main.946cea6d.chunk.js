(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{24:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),o=n(18),u=n.n(o),i=(n(24),n(9)),s=n(6),d=n(3),b=function(e){var t=e.onSubmit,n=e.formState,c=e.onChangeName,a=e.onChangeNumber;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:n.name,onChange:c})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:n.number,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Add"})})]})},f=function(e){var t=e.name,n=e.number,c=e.id,a=e.deleteContact;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[t," - ",n]}),Object(r.jsx)("button",{type:"button",onClick:function(){return a(c)},children:"Delete"})]})},m=function(e){var t=e.phoneList,n=e.deleteContact;return Object(r.jsx)("div",{className:"phones",children:t.map((function(e){return Object(r.jsx)(f,{deleteContact:n,name:e.name,id:e.id,number:e.number},"".concat(e.id,"-").concat(e.name))}))})},l=function(e){var t=e.searchValue,n=e.filterPhones;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:t,onChange:n})]})},j=n(5),h=n.n(j),O="/api/persons",x={getAll:function(){return h.a.get(O).then((function(e){return e.data}))},create:function(e){return h.a.post(O,e).then((function(e){return e.data}))},update:function(e,t){return h.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},deleteById:function(e){return h.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))}},p=function(e){var t=e.message;return null===t?null:Object(r.jsx)("div",{className:"".concat(t.error?"error":"success"),children:t.text})},v=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)({name:"",number:""}),u=Object(d.a)(o,2),f=u[0],j=u[1],h=Object(c.useState)([]),O=Object(d.a)(h,2),v=O[0],C=O[1],w=Object(c.useState)(""),g=Object(d.a)(w,2),y=g[0],S=g[1],k=Object(c.useState)({error:null,text:""}),N=Object(d.a)(k,2),I=N[0],T=N[1];Object(c.useEffect)((function(){C(n)}),[n]),Object(c.useEffect)((function(){L()}),[]);var L=function(){x.getAll().then((function(e){a(e)}))},A=function(e){return!(n.findIndex((function(t){return t.name===e}))>=0)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),I.text&&Object(r.jsx)(p,{message:I}),Object(r.jsx)(l,{filterPhones:function(e){var t=e.target.value.toLowerCase();S(t),C(n.filter((function(e){return e.name.toLowerCase().startsWith(t)})))},searchValue:y}),Object(r.jsx)(b,{formState:f,onSubmit:function(e){if(e.preventDefault(),!f.name||!f.number)return!1;if(A(f.name)){var t={name:f.name,number:f.number};x.create(t).then((function(e){T({error:!1,text:"Contact ".concat(t.name," was added")}),setTimeout((function(){T({error:"",text:""})}),5e3),a((function(t){return[].concat(Object(i.a)(t),[e])})),j({name:"",number:""})}))}else if(window.confirm("".concat(f.name," is already added to phonebook, replace the old number with a new one?"))){var r=n.find((function(e){return e.name===f.name})).id,c={name:f.name,number:f.number};x.update(r,c).then((function(e){T({error:!1,text:"Contact ".concat(c.name," was updated")}),setTimeout((function(){T({error:"",text:""})}),5e3),a(n.map((function(t){return t.name!==f.name?t:e}))),j({name:"",number:""})})).catch((function(e){T({error:!0,text:"Contact ".concat(c.name," was already deleted")}),setTimeout((function(){T({error:"",text:""})}),5e3),L()}))}},onChangeName:function(e){j((function(t){return Object(s.a)(Object(s.a)({},t),{},{name:e.target.value})}))},onChangeNumber:function(e){j((function(t){return Object(s.a)(Object(s.a)({},t),{},{number:e.target.value})}))}}),Object(r.jsx)("h2",{children:"Numbers"}),(null===v||void 0===v?void 0:v.length)>0&&Object(r.jsx)(m,{phoneList:v,deleteContact:function(e){window.confirm("Do you really want to delete this contact?")&&(!function(e){return n.findIndex((function(t){return t.id===e}))>=0}(e)?alert("".concat(f.name," is already deleted from phonebook")):x.deleteById(e).then((function(t){a((function(t){return Object(i.a)(t.filter((function(t){return t.id!==e})))})),T({error:!1,text:"Contact was deleted"}),setTimeout((function(){T({error:"",text:""})}),5e3)})).catch((function(e){T({error:!0,text:"Contact was already deleted"}),setTimeout((function(){T({error:"",text:""})}),5e3),L()})))}})]})};u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.946cea6d.chunk.js.map